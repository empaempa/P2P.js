<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">	
    <head>
        <title>P2P.JS</title>         
        <script type="text/javascript" src="js/external/swfobject.js"></script>
        <script type="text/javascript" src="js/P2P.js"></script>
    </head>
    <body>
        
        <!-- Note that the container needs to be atleast 214x137px to diplay the allow dialog -->
        <div id="container" style="width:214px;height:137px"></div>
        
        <script type="text/javascript">

     		var p2p = new P2P( { id:"myTestId", container: document.getElementById( "container" ), callback: onInit } );

     		function onInit() {

     			p2p.on( "connect", function( result ) {
     			    console.log( "onConnect: " + result );
     			    p2p.joinGroup( { name: "hello" } );
     			} );

     			p2p.on( "joinGroup", function( result ) {
     			    console.log( "onJoinGroup: " + result );
     			} );
     		
     		    p2p.on( "neighbor", function( result ) {
     		        console.log( "onNeighbor: " );
     		        console.log( result );
     		    } );
     			
     		    p2p.on( "neighborDisconnect", function( result ) {
     		        console.log( "onNeighborDisconnect: " );
     		        console.log( result );
     		    } );
     			     			
     			p2p.on( "post", function( message ) {
     			    console.log( "onPost: " );
     			    console.log( message );
     			} );
     			
     			p2p.on( "stream", function( message) {
     			    console.log( "onStream: " );
     			    console.log( message );
     			} );
     			
     			p2p.connect( "rtmfp://107.20.237.100/multicast/" );
     		}
     		
			document.onkeypress = function( e ) {
			    console.log( "onKeyPress" );
			    p2p.post( { rnd: Math.random(), message: "hello world!" } );
			}

        </script>
   </body>
</html>
